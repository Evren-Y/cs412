<!-- File: show_profile.html -->
<!-- Author: Evren Yaman (yamane@bu.edu), 9/26/2025 -->
<!-- Description: Extends base.html; shows a single Profile with large portrait, display_name, username, bio_text, and a back link to the all-profiles page. -->


{% extends 'mini_insta/base.html' %}

{% block title %}
    {{ profile.display_name }}
{% endblock %}

{% block content %}
<article class="profile-detail">
    <div class="profile-hero">
        <img
            src="{{ profile.profile_image_url }}"
            alt="{{ profile.display_name }}'s profile picture"
            class="profile-portrait"
        >
        <div class="profile-meta">
            <h2 class="profile-name">{{ profile.display_name }}</h2>
            <p class="profile-username">{{ profile.username }}</p>
            <p class="profile-bio">{{ profile.bio_text }}</p>
            <p class="social-stats">
                <a href="{% url 'show_followers' profile.pk %}">
                    <strong>{{ profile.get_num_followers }}</strong> Followers
                </a>
                &nbsp;•&nbsp;
                <a href="{% url 'show_following' profile.pk %}">
                    <strong>{{ profile.get_num_following }}</strong> Following
                </a>
            </p>
            <a href="{% url 'update_profile' profile.pk %}" class="btn btn-secondary">Update Profile</a>
            <a href="{% url 'show_all_profiles' %}" class="btn btn-secondary">← Back to all profiles</a>
        </div>
    </div>
</article>

<section class="profile-posts">
  <h3>Posts</h3>

  <div class="profiles-grid">
    {% for post in profile.get_all_posts %}

      <a href="{% url 'post' post.id %}" class="profile-card">
        {% if post.get_all_photos.first %}
          <img
            src="{{ post.get_all_photos.first.get_image_url }}"
            alt="Post {{ post.id }} by {{ profile.display_name }}"
            class="profile-thumb"
          >
        {% else %}
          <img
            src="https://tse1.mm.bing.net/th/id/OIP.XXWKhZZeWjrUPx-ZSfP0GAHaDt?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3"
            alt="No image available"
            class="profile-thumb"
          >
        {% endif %}
      </a>

    {% empty %}
      <p class="no-posts">No posts yet.</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
