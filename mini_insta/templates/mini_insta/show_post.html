<!-- File: show_post.html -->
<!-- Author: Evren Yaman (yamane@bu.edu), 10/3/2025 -->
<!-- Description: Extends base.html; Shows a post and all the photos attached to it -->

{% extends 'mini_insta/base.html' %}

{% block title %}
    Post by {{ post.profile.display_name }}
{% endblock %}

{% block content %}
<div class="wrapper">
  <article>
    <header class="profile-meta">
      <h2 class="profile-name">{{ post.profile.display_name }}</h2>
      <p class="profile-username">{{ post.profile.username }}</p>
      <p class="profile-bio">{{ post.caption }}</p>
      <p class="post-time"><time datetime="{{ post.timestamp|date:'c' }}">{{ post.timestamp }}</time></p>
    </header>

    <section>
      <div class="profiles-grid">
        {% for photo in post.get_all_photos %}
          {% if photo.get_image_url %}
            <img
              src="{{ photo.get_image_url }}"
              alt="Photo from post {{ post.id }}"
              class="profile-thumb"
            >
          {% else %}
            <img
              src="https://tse1.mm.bing.net/th/id/OIP.XXWKhZZeWjrUPx-ZSfP0GAHaDt?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3"
              alt="No image available"
              class="profile-thumb"
            >
          {% endif %}
        {% empty %}
          <img
            src="https://tse1.mm.bing.net/th/id/OIP.XXWKhZZeWjrUPx-ZSfP0GAHaDt?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3"
            alt="No images available"
            class="profile-thumb"
          >
        {% endfor %}
      </div>
    </section>

    <footer>
      <a href="{% url 'update_post' post.pk %}" class="btn btn-secondary">Update</a>
      <a href="{% url 'delete_post' post.pk %}" class="btn btn-danger">Delete</a>

      <a href="{% url 'profile' post.profile.id %}" class="btn btn-secondary">
        ← Back to {{ post.profile.display_name }}’s profile
      </a>
    </footer>
  </article>
</div>
{% endblock %}
